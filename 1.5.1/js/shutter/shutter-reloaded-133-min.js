shutterOnload=function(){shutterReloaded.init("sh")};if(typeof shutterOnload=="function"){if("undefined"!=typeof jQuery)jQuery(document).ready(function(){shutterOnload()});else if(typeof window.onload!="function")window.onload=shutterOnload;else{oldonld=window.onload;window.onload=function(){if(oldonld){oldonld()}shutterOnload()}}}shutterReloaded={I:function(e){return document.getElementById(e)},settings:function(){var e=this,t=shutterSettings;e.imageCount=t.imageCount||0;e.msgLoading=t.msgLoading||"L O A D I N G";e.msgClose=t.msgClose||"Click to Close"},init:function(e){var t=this,n,r,i,s,o,u,a,f,l,c,h;shutterLinks={},shutterSets={};if("object"!=typeof shutterSettings)shutterSettings={};t.mobileOS=typeof orientation!="undefined"?true:false;for(s=0;s<document.links.length;s++){n=document.links[s];i=n.href.indexOf("?")==-1?n.href.slice(-4).toLowerCase():n.href.substring(0,n.href.indexOf("?")).slice(-4).toLowerCase();if(i!=".jpg"&&i!=".png"&&i!=".gif"&&i!="jpeg")continue;if(e=="sh"&&n.className.toLowerCase().indexOf("shutter")==-1)continue;if(e=="lb"&&n.rel.toLowerCase().indexOf("lightbox")==-1)continue;if(n.className.toLowerCase().indexOf("shutterset")!=-1)u=n.className.replace(/\s/g,"_");else if(n.rel.toLowerCase().indexOf("lightbox[")!=-1)u=n.rel.replace(/\s/g,"_");else u=0,a=-1;if(u){if(!shutterSets[u])shutterSets[u]=[];a=shutterSets[u].push(s)}f=n.href.slice(n.href.lastIndexOf("/")+1);r=n.title&&n.title!=f?n.title:"";shutterLinks[s]={link:n.href,num:a,set:u,title:r};n.onclick=new Function('shutterReloaded.make("'+s+'");return false;')}t.settings()},make:function(e,t){var n=this,r,i,s="",o="",u,a,f,l,c,h=-1,p,d;if(!n.Top){if(typeof window.pageYOffset!="undefined")n.Top=window.pageYOffset;else n.Top=document.documentElement.scrollTop>0?document.documentElement.scrollTop:document.body.scrollTop}if(typeof n.pgHeight=="undefined")n.pgHeight=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);if(t)n.FS=t>0?1:0;else n.FS=shutterSettings.FS||0;if(n.resizing)n.resizing=null;if(n.mobileOS==true)window.onorientationchange=new Function('shutterReloaded.resize("'+e+'");');else window.onresize=new Function('shutterReloaded.resize("'+e+'");');document.documentElement.style.overflowX="hidden";if(!n.VP){n._viewPort();n.VP=true}if(!(l=n.I("shShutter"))){l=document.createElement("div");l.setAttribute("id","shShutter");document.getElementsByTagName("body")[0].appendChild(l);n.hideTags()}if(!(f=n.I("shDisplay"))){f=document.createElement("div");f.setAttribute("id","shDisplay");f.style.top=n.Top+"px";document.getElementsByTagName("body")[0].appendChild(f)}l.style.height=n.pgHeight+"px";var v=n.textBtns?" | ":"";if(shutterLinks[e].num>1){r=shutterSets[shutterLinks[e].set][shutterLinks[e].num-2];s='<a href="#" id="prevpic" onclick="shutterReloaded.make('+r+');return false">&lt;&lt;</a>'+v;u=new Image;u.src=shutterLinks[r].link}else{s=""}if(shutterLinks[e].num!=-1&&shutterLinks[e].num<shutterSets[shutterLinks[e].set].length){i=shutterSets[shutterLinks[e].set][shutterLinks[e].num];o='<a href="#" id="nextpic" onclick="shutterReloaded.make('+i+');return false">&gt;&gt;</a>'+v;a=new Image;a.src=shutterLinks[i].link}else{o=""}p=shutterLinks[e].num>0&&n.imageCount?'<div id="shCount">&nbsp;(&nbsp;'+shutterLinks[e].num+"&nbsp;/&nbsp;"+shutterSets[shutterLinks[e].set].length+"&nbsp;)&nbsp;</div>":"";d='<div id="shTitle"><div id="shPrev">'+s+'</div><div id="shNext">'+o+'</div><div id="shName">'+shutterLinks[e].title+"</div>"+p+"</div>";f.innerHTML='<div id="shWrap"><img src="'+shutterLinks[e].link+'" id="shTopImg" title="'+n.msgClose+'" onload="shutterReloaded.showImg();" onclick="shutterReloaded.hideShutter();" />'+d+"</div>";document.onkeydown=function(e){shutterReloaded.handleArrowKeys(e)};document.getElementById("shTopImg").src=shutterLinks[e].link;window.setTimeout(function(){shutterReloaded.loading()},1e3)},loading:function(){var e=this,t,n,r;if((r=e.I("shWrap"))&&r.style.visibility=="visible")return;if(!(t=e.I("shShutter")))return;if(e.I("shWaitBar"))return;n=document.createElement("div");n.setAttribute("id","shWaitBar");n.style.top=e.Top+"px";n.style.marginTop=e.pgHeight/2+"px";n.innerHTML=e.msgLoading;t.appendChild(n)},hideShutter:function(){var e=this,t,n;if(t=e.I("shDisplay"))t.parentNode.removeChild(t);if(n=e.I("shShutter"))n.parentNode.removeChild(n);e.hideTags(true);window.scrollTo(0,e.Top);window.onresize=e.FS=e.Top=e.VP=null;document.documentElement.style.overflowX="";document.onkeydown=null},resize:function(e){var t=this;if(t.resizing)return;if(!t.I("shShutter"))return;var n=t.I("shWrap");if(n)n.style.visibility="hidden";window.setTimeout(function(){shutterReloaded.resizing=null},500);window.setTimeout(new Function('shutterReloaded.VP = null;shutterReloaded.make("'+e+'");'),100);t.resizing=true},_viewPort:function(){var e=this;var t=window.innerHeight?window.innerHeight:0;var n=document.body.clientHeight?document.body.clientHeight:0;var r=document.documentElement?document.documentElement.clientHeight:0;if(t>0){e.wHeight=t-n>1&&t-n<30?n:t;e.wHeight=e.wHeight-r>1&&e.wHeight-r<30?r:e.wHeight}else e.wHeight=r>0?r:n;var i=document.documentElement?document.documentElement.clientWidth:0;var s=window.innerWidth?window.innerWidth:document.body.clientWidth;e.wWidth=i>1?i:s},showImg:function(){var e=this,t=e.I("shShutter"),n=e.I("shDisplay"),r=e.I("shTopImg"),i=e.I("shTitle"),s=e.I("shNavBar"),o,u,a,f,l,c,h,p,d=0;if(!t)return;if((o=e.I("shWrap"))&&o.style.visibility=="visible")return;if(u=e.I("shWaitBar"))u.parentNode.removeChild(u);t.style.width=n.style.width="";i.style.width=r.width-4+"px";l=e.wHeight-50;if(e.FS){if(r.width>e.wWidth-10)t.style.width=n.style.width=r.width+10+"px";document.documentElement.style.overflowX=""}else{window.scrollTo(0,e.Top);if(r.height>l){r.width=r.width*(l/r.height);r.height=l;d=1}if(r.width>e.wWidth-16){r.height=r.height*((e.wWidth-16)/r.width);r.width=e.wWidth-16;d=1}i.style.width=r.width-4+"px"}c=e.Top+r.height+10;if(c>e.pgHeight)t.style.height=c+"px";window.scrollTo(0,e.Top);h=(l-r.height)*.45;p=h>3?Math.floor(h):3;n.style.top=e.Top+p+"px";o.style.visibility="visible"},hideTags:function(e){var t=document.getElementsByTagName("select");var n=document.getElementsByTagName("object");var r=document.getElementsByTagName("embed");var s=document.getElementsByTagName("iframe");var o=e?"visible":"hidden";for(i=0;i<t.length;i++)t[i].style.visibility=o;for(i=0;i<n.length;i++)n[i].style.visibility=o;for(i=0;i<r.length;i++)r[i].style.visibility=o;for(i=0;i<s.length;i++)s[i].style.visibility=o},handleArrowKeys:function(e){var t=0;if(!e)var e=window.event;if(e.keyCode)t=e.keyCode;else if(e.which)t=e.which;var n=document.getElementById("prevpic");var r=document.getElementById("nextpic");var i=document.getElementById("shTopImg");switch(t){case 39:if(r)r.onclick();break;case 37:if(n)n.onclick();break;case 27:if(i)i.onclick();break}}}