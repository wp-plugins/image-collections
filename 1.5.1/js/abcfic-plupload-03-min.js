function initUploader(){jQuery(document).ready(function(e){e("#abcficUploadBtnPlaceholder").after("<input class='button-primary' type='button' name='uploadimage' id='abcficPluploadBtn' value='"+uploader.settings.i18n.upload+"' />").remove();e("#abcficPluploadBtn").click(function(){uploader.start()})})}function fileQueued(e){jQuery("#uploadStatusCntr").empty();filesize=" ("+plupload.formatSize(e.size)+") ";jQuery("#txtFileName").val(e.name);jQuery("#uploadQueue").append("<div id='"+e.id+"' class='media-item abcficPadB3'> [<a href=''>"+uploader.settings.i18n.remove+"</a>] "+e.name+filesize+"</div>").children("div:last").slideDown("slow").end();jQuery("#"+e.id+" a").click(function(t){jQuery("#"+e.id).remove();uploader.removeFile(e);t.preventDefault()})}function uploadStart(e){console.log("coll_id");console.log(e);abcficPBar.init(uploaderProgressBarOptions);if(!e>0){jQuery("#frm_uploader").prepend('<input type="hidden" name="plupload_callback" value="KO">');jQuery("#frm_uploader").submit()}return true}function uploadProgress(e){var t=e.loaded;var n=e.size;var r=Math.ceil(t/n*100);abcficPBar.increase(r);jQuery("#progressbar span").text(r+"% - "+e.name)}function uploadComplete(){if(uploader.total.queued==0){jQuery("#frm_uploader").prepend('<input type="hidden" name="plupload_callback" value="OK">');abcficPBar.finished();jQuery("#frm_uploader").submit()}}function uploadSuccess(e){console.log("fileObj");console.log(e);if(e.status==plupload.DONE){jQuery("#"+e.id).hide("slow");jQuery("#"+e.id).remove()}else{abcficPBar.addNote("<strong>ERROR</strong> Upload failed: "+e.name+" Status: "+e.status)}}function cancelUpload(){uploader.stop();jQuery.each(uploader.files,function(e,t){if(t.status==plupload.STOPPED){jQuery("#"+t.id).remove()}})}function uploadError(e,t,n){switch(t){case plupload.FAILED:error_name=e.name+" : "+pluploadL10n.upload_failed;break;case plupload.FILE_EXTENSION_ERROR:error_name=e.name+" : "+pluploadL10n.invalid_filetype;errFileExtension(e);break;case plupload.FILE_SIZE_ERROR:error_name=e.name+" : "+pluploadL10n.upload_limit_exceeded;break;case plupload.IMAGE_FORMAT_ERROR:error_name=e.name+" : "+pluploadL10n.not_an_image;break;case plupload.IMAGE_MEMORY_ERROR:error_name=e.name+" : "+pluploadL10n.image_memory_exceeded;break;case plupload.IMAGE_DIMENSIONS_ERROR:error_name=e.name+" : "+pluploadL10n.image_dimensions_exceeded;break;case plupload.GENERIC_ERROR:error_name=pluploadL10n.upload_failed;break;case plupload.IO_ERROR:error_name=pluploadL10n.io_error;break;case plupload.HTTP_ERROR:error_name=pluploadL10n.http_error;break;case plupload.INIT_ERROR:error_name=pluploadL10n.default_error;break;case plupload.SECURITY_ERROR:error_name=pluploadL10n.security_error;break;case plupload.UPLOAD_ERROR.UPLOAD_STOPPED:case plupload.UPLOAD_ERROR.FILE_CANCELLED:break;default:FileError(e,pluploadL10n.default_error)}}function errFileExtension(e){jQuery("#errUpload").html("Warning: Ivalid file types have been removed from the upload que!");jQuery("#"+e.id).hide();jQuery("#"+e.id).remove()}